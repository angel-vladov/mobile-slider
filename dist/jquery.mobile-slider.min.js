/*! mobile-slider - v0.1.0 - 2016-02-06
* Copyright (c) 2016 Angel Vladov; Licensed MIT */
!function(a){"use strict";function b(a,b){var c=a.attr("data-item-width")||a.attr("item-width"),d=a.attr("data-slider-when")||a.attr("slider-when");c&&(b.itemWidth=c),d&&(b.sliderWhen=d)}function c(a){if("string"==typeof a.itemWidth){var b=a.itemWidth.charAt(a.itemWidth.length-1);isNaN(parseInt(b))||(a.itemWidth+="px")}}function d(a){return a.outerWidth(!0)}a.fn.mobileSlider=function(e){var f=a.extend({},a.fn.mobileSlider.defaults,e);return this.each(function(){function e(){var b='<div class="slider-dots">';n.each(function(c){var d=a(this);d.data("slide-id",c),b+='<div class="slider-dot" data-node="'+c+'"></div>'}),b+="</ul>",o.html('<a href="" class="slider-prev"></a><a href="" class="slider-next"></a>'+b),o.on("click",".slider-dot",function(){var b=a(this).attr("data-node");h(n[b])})}function g(){for(var b=m.width()/2,c=null,d=0,e=n.length;e>d;d++){var f=a(n[d]);if(!(f.position().left<=b))break;c=f}if(!p||p[0]!==c[0]){p=c;var g=p.data("slide-id"),h='[data-node="'+g+'"]';n.removeClass("active"),p.addClass("active"),o.find(".slider-dot").removeClass("active").filter(h).addClass("active")}}function h(b,c){b=a(b);var e=d(m),f=d(b),h=b.position().left,i=m.scrollLeft(),j=(e-f)/2,k={duration:"400ms"};i+=h-j,c!==!1?m.animate({scrollLeft:i},k):m.scrollLeft(i),g()}function i(){o.on("click",".slider-prev",function(a){a.preventDefault();var b=p.data("slide-id"),c=b-1;return 0>c&&(c=n.length-1),h(n[c]),!1}),o.on("click",".slider-next",function(a){a.preventDefault();var b=p.data("slide-id"),c=(b+1)%n.length;return h(n[c]),!1})}function j(){var b=a(f.container).width(),c=l.hasClass("mobile-slider-active");if(b<=f.sliderWhen){if(!c){l.addClass("mobile-slider-active"),k(),r=(m.width()-n.first().width())/2,n.first().css("margin-left",r+"px"),n.last().css("margin-right",r+"px");var d=n[Math.ceil((n.length-1)/2)];h(d,!1)}}else c&&(n.first().css("margin-left",""),n.last().css("margin-right",""),l.removeClass("mobile-slider-active"))}function k(){q||(q=!0,m=l.find("ul"),n=m.find("li"),o=a('<div class="slider-nav"></div>').appendTo(l),m.addClass("slider-content"),n.length>0&&(f.itemWidth&&n.width(f.itemWidth),e(),m.on("scroll",g),g(),i()))}var l=a(this),m=null,n=null,o=null,p=null,q=!1,r=0;l.hasClass("mobile-slider")||l.addClass("mobile-slider"),b(l,f),c(f),a(window).on("resize orientationchange",j),j()})},a.fn.mobileSlider.defaults={itemWidth:null,sliderWhen:1024,container:window},a(document).ready(function(){a(".mobile-slider").mobileSlider()})}(jQuery);