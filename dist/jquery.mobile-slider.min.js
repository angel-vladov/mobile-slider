/*! mobile-slider - v0.1.0 - 2016-02-05
* Copyright (c) 2016 Angel Vladov; Licensed MIT */
!function(a){"use strict";function b(a,b){var c=a.attr("data-item-width")||a.attr("item-width"),d=a.attr("data-slider-when")||a.attr("slider-when");c&&(b.itemWidth=c),d&&(b.sliderWhen=d)}function c(a){if("string"==typeof a.itemWidth){var b=a.itemWidth.charAt(a.itemWidth.length-1);isNaN(parseInt(b))||(a.itemWidth+="px")}}a.fn.mobileSlider=function(d){var e=a.extend({},a.fn.mobileSlider.defaults,d);return this.each(function(){function d(){var b='<div class="slider-dots">';m.each(function(c){var d=a(this);d.data("slide-id",c),b+='<div class="slider-dot" data-node="'+c+'"></div>'}),b+="</ul>",n.html('<a href="" class="slider-prev"></a><a href="" class="slider-next"></a>'+b),n.on("click",".slider-dot",function(){var b=a(this).attr("data-node");g(m[b])})}function f(){for(var b=l.width()/2,c=null,d=0,e=m.length;e>d;d++){var f=a(m[d]);if(!(f.position().left<=b))break;c=f}if(!o||o[0]!==c[0]){o=c;var g=o.data("slide-id"),h='[data-node="'+g+'"]';m.removeClass("active"),o.addClass("active"),n.find(".slider-dot").removeClass("active").filter(h).addClass("active")}}function g(b,c){b=a(b);var d=(l.width()-b.width())/2,e=b.position().left+l.scrollLeft()-d,g={duration:"400ms"};c!==!1?l.animate({scrollLeft:e},g):l.scrollLeft(e),f()}function h(){n.on("click",".slider-prev",function(a){a.preventDefault();var b=o.data("slide-id"),c=b-1;return 0>c&&(c=m.length-1),g(m[c]),!1}),n.on("click",".slider-next",function(a){a.preventDefault();var b=o.data("slide-id"),c=(b+1)%m.lenth;return g(m[c]),!1})}function i(){var b=a(e.container).width(),c=k.hasClass("slider-active");b<=e.sliderWhen?c||(j(),q=(l.width()-m.first().width())/2,m.first().css("margin-left",q+"px"),m.last().css("margin-right",q+"px"),k.addClass("slider-active")):c&&(m.first().css("margin-left","0px"),m.last().css("margin-right","0px"),k.removeClass("slider-active"))}function j(){if(!p&&(p=!0,l=k.find("ul"),m=l.find("li"),n=a('<div class="slider-nav"></div>').appendTo(k),l.addClass("slider-content"),m.length>0)){e.itemWidth&&m.width(e.itemWidth),d(),l.on("scroll",f),f(),h();var b=m[Math.ceil(m.length/2)];g(b,!1)}}var k=a(this),l=null,m=null,n=null,o=null,p=!1,q=0;k.hasClass(".mobile-slider")||k.addClass("mobile-slider"),b(k,e),c(e),a(window).on("resize orientationchange",i),i()})},a.fn.mobileSlider.defaults={itemWidth:null,sliderWhen:1024,container:window},a(document).ready(function(){a(".mobile-slider").mobileSlider()})}(jQuery);